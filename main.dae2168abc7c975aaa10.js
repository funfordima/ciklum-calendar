!function(){"use strict";var t={8607:function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(r,a,i,o){var u,s=null;try{s=document.createElement(r)}catch(t){throw new Error("Unable to create HTMLElement! Give a proper tag name.")}a&&(u=s.classList).add.apply(u,n(a.split(" ")));i&&Array.isArray(i)?i.forEach((function(t){return s.appendChild(t)})):i&&"object"===e(i)?s.appendChild(i):i&&"string"==typeof i&&(s.innerHTML=i),o&&o.appendChild(s);for(var l=arguments.length,c=new Array(l>4?l-4:0),m=4;m<l;m++)c[m-4]=arguments[m];return c.length&&c.forEach((function(e){var n=t(e,2),r=n[0],a=n[1];s.setAttribute(r,a)})),s}var o=function(t,e){t.forEach((function(t){var n="\n      <input id='select_".concat(t,'\' class="menu__input" type="radio" name="select" />\n      <label for=\'select_').concat(t,'\' class="menu__label">').concat(t,"</label>\n    ");e.insertAdjacentHTML("beforeend",n)}))};function u(t,e,n,r,a,i,o){try{var u=t[i](o),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,a)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r,a,i;return e=t,n=null,r=[{key:"sendData",value:function(t,e){return fetch(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json"}}).catch((function(t){throw new Error("Could not fetch, message: ".concat(t.message))}))}},{key:"getData",value:(a=regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("Could not fetch ".concat(e,", status: ").concat(n.status));case 5:return t.next=7,n.json();case 7:return r=t.sent,t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=a.apply(t,e);function o(t){u(i,n,r,o,s,"next",t)}function s(t){u(i,n,r,o,s,"throw",t)}o(void 0)}))},function(t){return i.apply(this,arguments)})}],n&&s(e.prototype,n),r&&s(e,r),t}(),c="https://calendar-c6e1b-default-rtdb.firebaseio.com/events.json",m=function(t,e){return i("div","success-msg",t,e)},d=function(t,e){return i("div","error-msg",t,e)};function f(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var h=function(t,e,n,r,a){var u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=i("div","overlay",null,t),v=i("div","modal",null,s),h=i("form","modal-form",null,v,["name","modal-form"]),b=i("div","modal-form_line",null,h),p=i("div","modal-form_line",null,h),y=i("div","modal-form_line",null,h),g=i("div","modal-form_line",null,h),_=i("div","modal-form_line",null,h);i("p","modal-form_label","Name of event",b),i("p","modal-form_label","Participants",p),i("p","modal-form_label","Day",y),i("p","modal-form_label","Time",g);var x=i("input","modal-form__input",null,b,["type","text"],["tab-index","1"],["name","eventName"],["placeholder","Event"]),C=i("div","menu",null,p,["data-state",""]),E=i("div","menu__content",null,C),w=i("div","menu__title",null,C,["data-default",""]);w.setAttribute("tab-index","2"),o(e,E),E.querySelectorAll("input").forEach((function(t){return t.setAttribute("type","checkbox")})),E.querySelectorAll("label").forEach((function(t){return t.classList.add("member")}));var A=i("div","menu",null,y,["data-state",""]),S=i("div","menu__content",null,A),k=i("div","menu__title",null,A,["data-default",""]);k.setAttribute("tab-index","3"),o(n.slice(1),S);var T=i("div","menu",null,g,["data-state",""]),L=i("div","menu__content",null,T),j=i("div","menu__title",null,T,["data-default",""]);j.setAttribute("tab-index","4"),o(r,L);var I=i("button","modal-form__btn submit-button state-0",null,_,["type","submit"],["name","modal-form-submit"],["tab-index","5"]);i("input","modal-form__btn cancel-button",null,_,["type","button"],["value","Cancel"],["name","modal-form-cancel"],["tab-index","6"]),i("button","modal__close-btn","&times",v,["type","button"],["tab-index","7"]),i("span","pre-state-msg","Submit",I),i("span","current-state-msg hide","Sending...",I),i("span","done-state-msg hide","Done!",I);var O=function(){I.classList.remove("state-1","state-2","animated")},D=function(){I.classList.add("state-2"),setTimeout(O,2e3)},M=function(){I.classList.add("state-1","animated"),setTimeout(D,2e3)},N={success:"Готово!",failure:"Слот занят. Выберите другое время или дату.",noEvent:"Имя ивента некорректное",noMember:"Выберите, пожалуйста, участника(ов)",noDay:"Выберите, пожалуйста, день ивента",noTime:"Выберите, пожалуйста, время ивента"};h.addEventListener("submit",(function(e){e.preventDefault();var n=x.value.trim(),r=w.textContent.split(" "),i=k.textContent.trim(),o=j.textContent.trim(),v=!1;switch(!0){case n.length<2:var b=d(N.noEvent,h);setTimeout((function(){return h.removeChild(b)}),2e3);break;case!r.length:var p=d(N.noMember,h);setTimeout((function(){return h.removeChild(p)}),2e3);break;case!i:var y=d(N.noDay,h);setTimeout((function(){return h.removeChild(y)}),2e3);break;case!o:var g=d(N.noTime,h);setTimeout((function(){return h.removeChild(g)}),2e3);break;default:var _={title:n,participants:f(r),day:i,time:o,complete:!0},C=JSON.parse(localStorage.getItem("events")).map((function(t){var e=t.day,r=t.time,a=t.title,s=i===e&&o===r;if(s&&n===a){if(u)return v=!0,_;var l=d(N.failure,h);v=!1,setTimeout((function(){return h.removeChild(l)}),2e3)}else if(s&&n!==a)return v=!0,_;return t}));v&&(M(),l.sendData(c,C).then((function(){localStorage.setItem("events",JSON.stringify(C));var e=m(N.success,h);a(),setTimeout((function(){h.removeChild(e),t.removeChild(s)}),2100)})).catch((function(t){var e=d(t.message,h);setTimeout((function(){return h.removeChild(e)}),2e3)})).finally((function(){x.value="",w.textContent=w.getAttribute("data-default"),k.textContent=k.getAttribute("data-default"),j.textContent=j.getAttribute("data-default")})))}})),s.addEventListener("click",(function(e){var n=e.target;if(n.classList.contains("cancel-button")&&(x.value="",w.textContent=w.getAttribute("data-default"),k.textContent=k.getAttribute("data-default"),j.textContent=j.getAttribute("data-default")),(n.classList.contains("modal__close-btn")||n.classList.contains("overlay"))&&t.removeChild(s),n.classList.contains("menu__title")&&("active"===n.parentElement.getAttribute("data-state")?n.parentElement.setAttribute("data-state",""):n.parentElement.setAttribute("data-state","active")),n.classList.contains("member")){var r=n.parentElement.nextElementSibling.textContent,a=n.textContent;if(r.includes(a)){var i=r.split(" "),o=r.split(" ").findIndex((function(t){return t===a}));i.splice(o,1),n.parentElement.nextElementSibling.textContent=i.join(" ")}else n.parentElement.nextElementSibling.textContent+=" ".concat(n.textContent);n.parentElement.parentElement.setAttribute("data-state","")}n.classList.contains("menu__label")&&!n.classList.contains("member")&&(n.parentElement.nextElementSibling.textContent=n.textContent,n.parentElement.parentElement.setAttribute("data-state",""))}))},b=function(t,e,n){var r=i("div","overlay",null,t),a=i("div","modal msg",null,r),o=i("div","modal-form_line",null,a),u=i("div","modal-form_line",null,a);i("h3","modal__text",e,o,["tab-index","1"]),i("input","modal-form__btn submit-button state-0",null,u,["type","button"],["value","Confirm"],["name","modal-submit"],["tab-index","2"]),i("input","modal-form__btn cancel-button",null,u,["type","button"],["value","Cancel"],["name","modal-cancel"],["tab-index","3"]),r.addEventListener("click",(function(e){var a=e.target;a.classList.contains("submit-button")&&(n(),t.removeChild(r)),(a.classList.contains("cancel-button")||a.classList.contains("overlay"))&&t.removeChild(r)}))},p=function(t){var e=i("footer","footer",null,t),n=i("div","author__container",null,e),r=i("div","author",null,n);i("a","","Dima Litvinov",r,["href","https://github.com/funfordima"]);var a=i("div","author",null,n),o=i("div","author",null,n,["id","my-share"]),u=document.createElement("script");u.src="https://yastatic.net/share2/share.js";o.append(u),o.insertAdjacentHTML("beforeend",'\n  <div class="ya-share2" data-curtain data-color-scheme="blackwhite" data-limit="3" data-services="telegram,skype,linkedin">\n  </div>\n  ');a.insertAdjacentHTML("beforeend",'\n  <object type="image/svg+xml" data="../src/assets/image/git.svg" width="70" height="70">\n    <img src="../src/assets/image/git.png" width="200" height="200" alt="image format png" />\n  </object>\n')};function y(t,e,n,r,a,i,o){try{var u=t[i](o),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,a)}function g(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){y(i,r,a,o,u,"next",t)}function u(t){y(i,r,a,o,u,"throw",t)}o(void 0)}))}}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=document.getElementById("root"),this.days=["Name","Mon","Tue","Wed","Thu","Fri"],this.timeLabels=["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"],this.todos=[],this.members=[],this.contentContainer=""}var e,n,r,a,u,s,f;return e=t,(n=[{key:"createHeader",value:function(){var t=i("header","header",null,this.root),e=i("h1","header__title",null,t),n=i("div","header__form_container",null,t),r=i("form","header__form",null,n,["name","members-form"]),a=i("div","event-btn__container",null,r);this.menu=i("div","menu",null,r,["data-state",""]);var o=i("div","menu__content",null,this.menu);return this.menuTitle=i("div","menu__title",null,this.menu,["data-default",""]),i("div","menu__container",this.menu,r),this.btnAddItem=i("input","event-btn-add",null,a,["type","submit"],["value","New Event +"]),this.resetMenuBtn=i("input","event-btn-reset",null,a,["type","reset"],["value","Clear it!"]),i("a","header__title_link","Calendar",e,["href","#"],["alt","logo link"]),o}},{key:"generateMembers",value:(f=g(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.getData("https://calendar-c6e1b-default-rtdb.firebaseio.com/members.json");case 2:this.members=t.sent,this.members=this.members[Object.keys(this.members)[Object.keys(this.members).length-1]],localStorage.setItem("members",JSON.stringify(this.members)),o(this.members,e),document.querySelectorAll(".menu__content input").forEach((function(t,e){return t.setAttribute("id","".concat(n.members[e],"_header"))})),document.querySelectorAll(".menu__content label").forEach((function(t,e){return t.setAttribute("for","".concat(n.members[e],"_header"))}));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"generateToDoItems",value:(s=g(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.contentContainer.innerHTML="",e.forEach((function(t){var e=t.title,r=t.complete,a=t.day,o=t.time,u=t.participants,s=i("div","main__item",null,n.contentContainer,["data-complete",r],["data-day",a],["data-time",o],["title",u.join(" ")]);i("h3","main__item_title",e,s),i("div","main__item_btn-close","&times;",s)}));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"createMain",value:function(){var t=i("main","main",null,this.root),e=i("div","row-container",null,t),n=i("div","col-container",null,t);this.contentContainer=i("div","content-container",null,t),this.days.forEach((function(t){i("div","main__item",t,e)})),this.timeLabels.forEach((function(t){i("div","main__item",t,n)})),this.generateToDoItems(this.todos)}},{key:"handlerInputMembers",value:function(){var t=this;this.menu.addEventListener("click",(function(e){var n=e.target;if(n.classList.contains("menu__title")&&("active"===t.menu.getAttribute("data-state")?t.menu.setAttribute("data-state",""):t.menu.setAttribute("data-state","active")),n.classList.contains("menu__label")){t.menuTitle.textContent=n.textContent,t.menu.setAttribute("data-state","");var r=t.menuTitle.textContent;t.todos.map((function(t){return t.participants.includes(r)?t.complete=!0:t.complete=!1,t})),t.generateToDoItems(t.todos)}}))}},{key:"handlerDeleteEvent",value:function(t){var e=this,n=!1,r=t.dataset.day,a=t.dataset.time,i={title:"",participants:[""],day:r,time:a,complete:!1};this.todos=this.todos.map((function(t){return t.time===a&&t.day===r?(n=!0,i):t})),n&&l.sendData(c,this.todos).then((function(){localStorage.setItem("events",JSON.stringify(e.todos));var t=m("Готово!",e.root);e.generateToDoItems(e.todos),setTimeout((function(){return e.root.removeChild(t)}),2e3)})).catch((function(t){var n=d(t.message,e.root);setTimeout((function(){return e.root.removeChild(n)}),2e3)}))}},{key:"init",value:(u=g(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.getData(c);case 2:this.todos=t.sent,this.todos=this.todos[Object.keys(this.todos)[Object.keys(this.todos).length-1]],localStorage.setItem("events",JSON.stringify(this.todos)),e=this.createHeader(),this.generateMembers(e),this.createMain(),p(this.root),this.handlerInputMembers();case 10:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"render",value:(a=g(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:this.contentContainer.addEventListener("click",(function(t){var n=t.target;if(n.classList.contains("main__item_btn-close")){var r=n.previousElementSibling.textContent;b(e.root,"Вы уверены, что хотите удалить ивент ".concat(r,"?"),e.handlerDeleteEvent.bind(e,n.parentElement))}})),this.resetMenuBtn.addEventListener("click",(function(){e.menuTitle.textContent=e.menuTitle.getAttribute("data-default"),e.todos.map((function(t){return t.participants.forEach((function(n){e.members.includes(n)?t.complete=!0:t.complete=!1})),t})),e.generateToDoItems(e.todos)})),this.btnAddItem.addEventListener("click",(function(t){t.preventDefault(),h(document.body,e.members,e.days,e.timeLabels,(function(){var t=JSON.parse(localStorage.getItem("events"));e.generateToDoItems(t),e.todos=t}))})),document.querySelector(".author:nth-of-type(2)").addEventListener("click",(function(){return new Audio("../src/assets/meow.mp3").play()}));case 6:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})}])&&_(e.prototype,n),r&&_(e,r),t}())).render()}},e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.m=t,n.x=function(){},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={179:0},e=[[6371,371],[8607,371]],r=function(){},a=function(a,i){for(var o,u,s=i[0],l=i[1],c=i[2],m=i[3],d=0,f=[];d<s.length;d++)u=s[d],n.o(t,u)&&t[u]&&f.push(t[u][0]),t[u]=0;for(o in l)n.o(l,o)&&(n.m[o]=l[o]);for(c&&c(n),a&&a(i);f.length;)f.shift()();return m&&e.push.apply(e,m),r()},i=self.webpackChunk=self.webpackChunk||[];function o(){for(var r,a=0;a<e.length;a++){for(var i=e[a],o=!0,u=1;u<i.length;u++){var s=i[u];0!==t[s]&&(o=!1)}o&&(e.splice(a--,1),r=n(n.s=i[0]))}return 0===e.length&&(n.x(),n.x=function(){}),r}i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i));var u=n.x;n.x=function(){return n.x=u||function(){},(r=o)()}}(),n.x()}();
//# sourceMappingURL=main.dae2168abc7c975aaa10.js.map