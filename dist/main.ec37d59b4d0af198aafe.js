!function(){"use strict";var t={8607:function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(r,a,i,o){var s,l=null;try{l=document.createElement(r)}catch(t){throw new Error("Unable to create HTMLElement! Give a proper tag name.")}a&&(s=l.classList).add.apply(s,n(a.split(" ")));i&&Array.isArray(i)?i.forEach((function(t){return l.appendChild(t)})):i&&"object"===e(i)?l.appendChild(i):i&&"string"==typeof i&&(l.innerHTML=i),o&&o.appendChild(l);for(var u=arguments.length,c=new Array(u>4?u-4:0),m=4;m<u;m++)c[m-4]=arguments[m];return c.length&&c.forEach((function(e){var n=t(e,2),r=n[0],a=n[1];l.setAttribute(r,a)})),l}var o=function(t,e){t.forEach((function(t){var n="\n      <input id='select_".concat(t,'\' class="menu__input" type="radio" name="select" />\n      <label for=\'select_').concat(t,'\' class="menu__label">').concat(t,"</label>\n    ");e.insertAdjacentHTML("beforeend",n)}))};function s(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,a)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r,a,i;return e=t,n=null,r=[{key:"sendData",value:function(t,e){return fetch(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json"}}).catch((function(t){throw new Error("Could not fetch, message: ".concat(t.message))}))}},{key:"getData",value:(a=regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("Could not fetch ".concat(e,", status: ").concat(n.status));case 5:return t.next=7,n.json();case 7:return r=t.sent,t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=a.apply(t,e);function o(t){s(i,n,r,o,l,"next",t)}function l(t){s(i,n,r,o,l,"throw",t)}o(void 0)}))},function(t){return i.apply(this,arguments)})}],n&&l(e.prototype,n),r&&l(e,r),t}(),c="https://calendar-c6e1b-default-rtdb.firebaseio.com/events.json",m="Готово!",d="Слот занят. Выберите другое время или дату.",f="Имя ивента некорректное",h="Выберите, пожалуйста, участника(ов)",v="Выберите, пожалуйста, день ивента",p="Выберите, пожалуйста, время ивента",b=function(t,e){return i("div","success-msg",t,e)},y=function(t,e){return i("div","error-msg",t,e)};function g(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var x=function(t,e,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=i("div","overlay",null,t),_=i("div","modal",null,l),x=i("form","modal-form",null,_,["name","modal-form"]),C=i("div","modal-form_line",null,x),E=i("div","modal-form_line",null,x),A=i("div","modal-form_line",null,x),S=i("div","modal-form_line",null,x),w=i("div","modal-form_line",null,x);i("p","modal-form_label","Name of event",C),i("p","modal-form_label","Participants",E),i("p","modal-form_label","Day",A),i("p","modal-form_label","Time",S);var k=i("input","modal-form__input",null,C,["type","text"],["tab-index","1"],["name","eventName"],["placeholder","Event"]),T=i("div","menu",null,E,["data-state",""]),L=i("div","menu__content",null,T),j=i("div","menu__title",null,T,["data-default",""]);j.setAttribute("tab-index","2"),o(e,L),L.querySelectorAll("input").forEach((function(t){return t.setAttribute("type","checkbox")})),L.querySelectorAll("label").forEach((function(t){return t.classList.add("member")}));var I=i("div","menu",null,A,["data-state",""]),O=i("div","menu__content",null,I),D=i("div","menu__title",null,I,["data-default",""]);D.setAttribute("tab-index","3"),o(n.slice(1),O);var N=i("div","menu",null,S,["data-state",""]),M=i("div","menu__content",null,N),q=i("div","menu__title",null,N,["data-default",""]);q.setAttribute("tab-index","4"),o(r,M);var R=i("button","modal-form__btn submit-button state-0",null,w,["type","submit"],["name","modal-form-submit"],["tab-index","5"]);i("input","modal-form__btn cancel-button",null,w,["type","button"],["value","Cancel"],["name","modal-form-cancel"],["tab-index","6"]),i("button","modal__close-btn","&times",_,["type","button"],["tab-index","7"]),i("span","pre-state-msg","Submit",R),i("span","current-state-msg hide","Sending...",R),i("span","done-state-msg hide","Done!",R);var J=function(){R.classList.remove("state-1","state-2","animated")},P=function(){R.classList.add("state-2"),setTimeout(J,2e3)},H=function(){R.classList.add("state-1","animated"),setTimeout(P,2e3)};x.addEventListener("submit",(function(e){e.preventDefault();var n=k.value.trim(),r=j.textContent.split(" "),i=D.textContent.trim(),o=q.textContent.trim(),_=!1;switch(!0){case n.length<2:var C=y(f,x);setTimeout((function(){return x.removeChild(C)}),2e3);break;case!r.length:var E=y(h,x);setTimeout((function(){return x.removeChild(E)}),2e3);break;case!i:var A=y(v,x);setTimeout((function(){return x.removeChild(A)}),2e3);break;case!o:var S=y(p,x);setTimeout((function(){return x.removeChild(S)}),2e3);break;default:var w={title:n,participants:g(r),day:i,time:o,complete:!0},T=JSON.parse(localStorage.getItem("events")).map((function(t){var e=t.day,r=t.time,a=t.title,l=i===e&&o===r;if(l&&n===a){if(s)return _=!0,w;var u=y(d,x);_=!1,setTimeout((function(){return x.removeChild(u)}),2e3)}else if(l&&n!==a)return _=!0,w;return t}));_&&(H(),u.sendData(c,T).then((function(){localStorage.setItem("events",JSON.stringify(T));var e=b(m,x);a(),setTimeout((function(){x.removeChild(e),t.removeChild(l)}),2100)})).catch((function(t){var e=y(t.message,x);setTimeout((function(){return x.removeChild(e)}),2e3)})).finally((function(){k.value="",j.textContent=j.getAttribute("data-default"),D.textContent=D.getAttribute("data-default"),q.textContent=q.getAttribute("data-default")})))}})),l.addEventListener("click",(function(e){var n=e.target;if(n.classList.contains("cancel-button")&&(k.value="",j.textContent=j.getAttribute("data-default"),D.textContent=D.getAttribute("data-default"),q.textContent=q.getAttribute("data-default")),(n.classList.contains("modal__close-btn")||n.classList.contains("overlay"))&&t.removeChild(l),n.classList.contains("menu__title")&&("active"===n.parentElement.getAttribute("data-state")?n.parentElement.setAttribute("data-state",""):n.parentElement.setAttribute("data-state","active")),n.classList.contains("member")){var r=n.parentElement.nextElementSibling.textContent,a=n.textContent;if(r.includes(a)){var i=r.split(" "),o=r.split(" ").findIndex((function(t){return t===a}));i.splice(o,1),n.parentElement.nextElementSibling.textContent=i.join(" ")}else n.parentElement.nextElementSibling.textContent+=" ".concat(n.textContent);n.parentElement.parentElement.setAttribute("data-state","")}n.classList.contains("menu__label")&&!n.classList.contains("member")&&(n.parentElement.nextElementSibling.textContent=n.textContent,n.parentElement.parentElement.setAttribute("data-state",""))}))},C=function(t,e,n){var r=i("div","overlay",null,t),a=i("div","modal msg",null,r),o=i("div","modal-form_line",null,a),s=i("div","modal-form_line",null,a);i("h3","modal__text",e,o,["tab-index","1"]),i("input","modal-form__btn submit-button state-0",null,s,["type","button"],["value","Confirm"],["name","modal-submit"],["tab-index","2"]),i("input","modal-form__btn cancel-button",null,s,["type","button"],["value","Cancel"],["name","modal-cancel"],["tab-index","3"]),r.addEventListener("click",(function(e){var a=e.target;a.classList.contains("submit-button")&&(n(),t.removeChild(r)),(a.classList.contains("cancel-button")||a.classList.contains("overlay"))&&t.removeChild(r)}))},E=function(t){var e=i("footer","footer",null,t),n=i("div","author__container",null,e),r=i("div","author",null,n);i("a","","Dima Litvinov",r,["href","https://github.com/funfordima"]);var a=i("div","author",null,n),o=i("div","author",null,n,["id","my-share"]),s=document.createElement("script");s.src="https://yastatic.net/share2/share.js";o.append(s),o.insertAdjacentHTML("beforeend",'\n  <div class="ya-share2" data-curtain data-color-scheme="blackwhite" data-limit="3" data-services="telegram,skype,linkedin">\n  </div>\n  ');a.insertAdjacentHTML("beforeend",'\n  <object type="image/svg+xml" data="../src/assets/image/git.svg" width="70" height="70">\n    <img src="../src/assets/image/git.png" width="200" height="200" alt="image format png" />\n  </object>\n')};function A(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,a)}function k(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){w(i,r,a,o,s,"next",t)}function s(t){w(i,r,a,o,s,"throw",t)}o(void 0)}))}}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=document.getElementById("root"),this.days=["Name","Mon","Tue","Wed","Thu","Fri"],this.timeLabels=["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"],this.todos=[],this.members=[],this.contentContainer=""}var e,n,r,a,s,l,d;return e=t,(n=[{key:"createHeader",value:function(){var t=i("header","header",null,this.root),e=i("h1","header__title",null,t),n=i("div","header__form_container",null,t),r=i("form","header__form",null,n,["name","members-form"]),a=i("div","event-btn__container",null,r);this.menu=i("div","menu",null,r,["data-state",""]);var o=i("div","menu__content",null,this.menu);return this.menuTitle=i("div","menu__title",null,this.menu,["data-default",""]),i("div","menu__container",this.menu,r),this.btnAddItem=i("input","event-btn-add",null,a,["type","submit"],["value","New Event +"]),this.resetMenuBtn=i("input","event-btn-reset",null,a,["type","reset"],["value","Clear it!"]),i("a","header__title_link","Calendar",e,["href","#"],["alt","logo link"]),o}},{key:"generateMembers",value:(d=k(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.getData("https://calendar-c6e1b-default-rtdb.firebaseio.com/members.json");case 2:this.members=t.sent,this.members=this.members[Object.keys(this.members)[Object.keys(this.members).length-1]],localStorage.setItem("members",JSON.stringify(this.members)),o(this.members,e),document.querySelectorAll(".menu__content input").forEach((function(t,e){return t.setAttribute("id","".concat(n.members[e],"_header"))})),document.querySelectorAll(".menu__content label").forEach((function(t,e){return t.setAttribute("for","".concat(n.members[e],"_header"))}));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"generateToDoItems",value:(l=k(regeneratorRuntime.mark((function t(e){var n,r,a,o,s,l,d,f,h,v,p=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v=function(){if(this.className="main__item",n){var t=n.dataset.day,e=n.dataset.time,r=this.dataset.day,a=this.dataset.time,s=n.title.split(" "),l={title:n.firstChild.textContent,participants:A(s),day:r,time:a,complete:!0},d=JSON.parse(localStorage.getItem("events")).map((function(n){var i=n.day,o=n.time;return t===i&&e===o?{title:"",participants:[""],day:t,time:e,complete:!1}:r===i&&a===o?l:n})),f=i("div","main__item draggable",null,null,["data-complete",!1],["data-day",t],["data-time",e],["title",[""]],["draggable",!1]);i("h3","main__item_title","",f),i("div","main__item_btn-close","&times;",f),document.querySelector(".invisible").replaceWith(f),u.sendData(c,d).then((function(){var t=document.querySelector(".main");localStorage.setItem("events",JSON.stringify(d));var e=b(m,t);o(d),setTimeout((function(){t.removeChild(e)}),2100)})).catch((function(t){var e=document.querySelector(".main"),n=y(t.message,e);setTimeout((function(){return e.removeChild(n)}),2e3)}))}this.replaceWith(n),n=null},h=function(){this.className="main__item"},f=function(t){t.preventDefault(),this.className+=" hovered"},d=function(t){t.preventDefault()},l=function(){this.className="main__item"},s=function(){var t=this;n=this,this.className+=" hold",setTimeout((function(){t.className="invisible"}),0)},this.contentContainer.innerHTML="",e.forEach((function(t){var e=t.title,n=t.complete,r=t.day,a=t.time,o=t.participants,s=i("div","wrap",null,p.contentContainer),l=i("div","main__item",null,s,["data-complete",n],["data-day",r],["data-time",a],["title",o.join(" ")],["draggable",n]);i("h3","main__item_title",e,l),i("div","main__item_btn-close","&times;",l)})),n=null,r=this.contentContainer.querySelectorAll('div[draggable="true"]'),a=this.contentContainer.querySelectorAll('div[draggable="false"]'),o=this.generateToDoItems.bind(this),a.forEach((function(t){t.addEventListener("dragover",d),t.addEventListener("dragenter",f),t.addEventListener("dragleave",h),t.addEventListener("drop",v)})),r.forEach((function(t){return t.addEventListener("dragstart",s)})),r.forEach((function(t){return t.addEventListener("dragend",l)}));case 15:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"createMain",value:function(){this.main=i("main","main",null,this.root);var t=i("div","row-container",null,this.main),e=i("div","col-container",null,this.main);this.contentContainer=i("div","content-container",null,this.main),this.days.forEach((function(e){i("div","main__item",e,t)})),this.timeLabels.forEach((function(t){i("div","main__item",t,e)})),this.generateToDoItems(this.todos)}},{key:"handlerInputMembers",value:function(){var t=this;this.menu.addEventListener("click",(function(e){var n=e.target;if(n.classList.contains("menu__title")&&("active"===t.menu.getAttribute("data-state")?t.menu.setAttribute("data-state",""):t.menu.setAttribute("data-state","active")),n.classList.contains("menu__label")){t.menuTitle.textContent=n.textContent,t.menu.setAttribute("data-state","");var r=t.menuTitle.textContent;t.todos.map((function(t){return t.participants.includes(r)?t.complete=!0:t.complete=!1,t})),t.generateToDoItems(t.todos)}}))}},{key:"handlerDeleteEvent",value:function(t){var e=this,n=!1,r=t.dataset.day,a=t.dataset.time,i={title:"",participants:[""],day:r,time:a,complete:!1};this.todos=this.todos.map((function(t){return t.time===a&&t.day===r?(n=!0,i):t})),n&&u.sendData(c,this.todos).then((function(){localStorage.setItem("events",JSON.stringify(e.todos));var t=b("Готово!",e.root);e.generateToDoItems(e.todos),setTimeout((function(){return e.root.removeChild(t)}),2e3)})).catch((function(t){var n=y(t.message,e.root);setTimeout((function(){return e.root.removeChild(n)}),2e3)}))}},{key:"init",value:(s=k(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.getData(c);case 2:this.todos=t.sent,this.todos=this.todos[Object.keys(this.todos)[Object.keys(this.todos).length-1]],localStorage.setItem("events",JSON.stringify(this.todos)),e=this.createHeader(),this.generateMembers(e),this.createMain(),E(this.root),this.handlerInputMembers();case 10:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"render",value:(a=k(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:this.contentContainer.addEventListener("click",(function(t){var n=t.target;if(n.classList.contains("main__item_btn-close")){var r=n.previousElementSibling.textContent;C(e.root,"Вы уверены, что хотите удалить ивент ".concat(r,"?"),e.handlerDeleteEvent.bind(e,n.parentElement))}})),this.resetMenuBtn.addEventListener("click",(function(){e.menuTitle.textContent=e.menuTitle.getAttribute("data-default"),e.todos.map((function(t){return t.participants.forEach((function(n){e.members.includes(n)?t.complete=!0:t.complete=!1})),t})),e.generateToDoItems(e.todos)})),this.btnAddItem.addEventListener("click",(function(t){t.preventDefault(),x(document.body,e.members,e.days,e.timeLabels,(function(){var t=JSON.parse(localStorage.getItem("events"));e.generateToDoItems(t),e.todos=t}))})),document.querySelector(".author:nth-of-type(2)").addEventListener("click",(function(){return new Audio("../src/assets/meow.mp3").play()}));case 6:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})}])&&T(e.prototype,n),r&&T(e,r),t}())).render()}},e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.m=t,n.x=function(){},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={179:0},e=[[6371,371],[8607,371]],r=function(){},a=function(a,i){for(var o,s,l=i[0],u=i[1],c=i[2],m=i[3],d=0,f=[];d<l.length;d++)s=l[d],n.o(t,s)&&t[s]&&f.push(t[s][0]),t[s]=0;for(o in u)n.o(u,o)&&(n.m[o]=u[o]);for(c&&c(n),a&&a(i);f.length;)f.shift()();return m&&e.push.apply(e,m),r()},i=self.webpackChunk=self.webpackChunk||[];function o(){for(var r,a=0;a<e.length;a++){for(var i=e[a],o=!0,s=1;s<i.length;s++){var l=i[s];0!==t[l]&&(o=!1)}o&&(e.splice(a--,1),r=n(n.s=i[0]))}return 0===e.length&&(n.x(),n.x=function(){}),r}i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i));var s=n.x;n.x=function(){return n.x=s||function(){},(r=o)()}}(),n.x()}();
//# sourceMappingURL=main.ec37d59b4d0af198aafe.js.map